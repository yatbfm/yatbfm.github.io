<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Keep Studying">
    <meta name="author" content="yatbfm">
    
    <title>
        
            大数据环境搭建 |
        
        yatbfm&#39;s blog
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    
        <link rel="shortcut icon" href="/images/image.png">
    
    
<link rel="stylesheet" href="/font/css/fontawesome.min.css">

    
<link rel="stylesheet" href="/font/css/regular.min.css">

    
<link rel="stylesheet" href="/font/css/solid.min.css">

    
<link rel="stylesheet" href="/font/css/brands.min.css">

    
        
            
                
<link rel="stylesheet" href="/css/custom.css">

            
        
    
    <script class="keep-theme-configurations">
    const KEEP = window.KEEP || {}
    KEEP.hexo_config = {"hostname":"yatbfm.github.io","root":"/","language":"zh-CN","path":"search.json"}
    KEEP.theme_config = {"base_info":{"primary_color":"#0066cc","title":"yatbfm's blog","author":"yatbfm","favicon":"/images/image.png"},"menu":{"Home":"/","Archives":"/archives","Categories":"/categories","Tags":"/tags"},"first_screen":{"enable":true,"background_img":"/images/bg.svg","background_img_dark":"/images/bg.svg","description":"Keep studying.","hitokoto":true},"social_contact":{"enable":false,"links":{"github":null,"weixin":null,"qq":null,"weibo":null,"zhihu":null,"twitter":null,"x":null,"facebook":null,"email":null}},"scroll":{"progress_bar":true},"home":{"category":true,"tag":true,"announcement":null},"post":{"word_count":{"wordcount":true,"min2read":true},"datetime_format":"YYYY-MM-DD HH:mm","copyright_info":true},"code_block":{"tools":{"enable":true,"style":"default"},"highlight_theme":"default"},"toc":{"enable":true,"number":false,"expand_all":true,"init_open":true,"layout":"right"},"website_count":{"busuanzi_count":{"enable":true,"site_uv":true,"site_pv":true,"page_pv":true}},"local_search":{"enable":true,"preload":true},"comment":{"enable":false,"use":"valine","valine":{"appid":null,"appkey":null,"server_urls":null,"placeholder":null},"gitalk":{"github_id":null,"github_admins":null,"repository":null,"client_id":null,"client_secret":null,"proxy":null},"twikoo":{"env_id":null,"region":null,"version":"1.6.21"},"waline":{"server_url":null,"reaction":false,"version":2},"giscus":{"repo":null,"repo_id":null,"category":"Announcements","category_id":null,"reactions_enabled":false},"artalk":{"server":null},"disqus":{"shortname":null}},"rss":{"enable":false},"lazyload":{"enable":false},"cdn":{"enable":false,"provider":"cdnjs"},"pjax":{"enable":false},"footer":{"since":2020,"word_count":false,"icp":{"enable":false,"record_code":null,"url":"https://beian.miit.gov.cn"},"site_deploy":{"enable":false,"provider":"github","url":null},"shields_style":{"enable":false,"custom":[{"link_url":null,"img_url":null}]}},"inject":{"enable":true,"css":["/css/custom.css"],"js":["/js/custom.js"]},"root":"","source_data":{},"version":"4.1.1"}
    KEEP.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"}
    KEEP.language_code_block = {"copy":"复制代码","copied":"已复制","fold":"折叠代码块","folded":"已折叠"}
    KEEP.language_copy_copyright = {"copy":"复制版权信息","copied":"已复制","title":"原文标题","author":"原文作者","link":"原文链接"}
  </script>
<meta name="generator" content="Hexo 7.0.0"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
</div>



<main class="page-container border-box">
    <!-- home first screen  -->
    

    <!-- page content -->
    <div class="page-main-content border-box">
        <div class="page-main-content-top">
            
<header class="header-wrapper">

    <div class="border-box header-content">
        <div class="left border-box">
            
            <a class="site-name border-box" href="/">
               yatbfm&#39;s blog
            </a>
        </div>

        <div class="right border-box">
            <div class="pc">
                <ul class="menu-list">
                    
                        
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                
                                首页
                            </a>
                        </li>
                    
                        
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                
                                归档
                            </a>
                        </li>
                    
                        
                        <li class="menu-item">
                            <a class=""
                               href="/categories"
                            >
                                
                                分类
                            </a>
                        </li>
                    
                        
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >
                                
                                标签
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas search fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/"
                    >首页</a>
                </li>
            
                
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives"
                    >归档</a>
                </li>
            
                
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories"
                    >分类</a>
                </li>
            
                
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags"
                    >标签</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle border-box">

            <div class="main-content border-box">
                

                    
<div class="fade-in-down-animation">
    <div class="post-page-container border-box">
        <div class="post-content-container border-box">
            

            <div class="post-content-bottom border-box">
                
                    <div class="post-title">
                        大数据环境搭建
                    </div>
                

                
                    <div class="post-header border-box">
                        
                        <div class="info-box">
                            <div class="author border-box">
                                <span class="name">yatbfm</span>
                                
                            </div>
                            <div class="meta-info border-box">
                                

<div class="post-meta-info-container border-box post">
    <div class="post-meta-info border-box">
        

        
            <span class="meta-info-item post-create-date">
                <i class="icon fa-solid fa-calendar-plus"></i>&nbsp;
                <span class="datetime">2023-12-01 21:39</span>
            </span>

            <span class="meta-info-item post-update-date">
                <i class="icon fa-solid fa-file-pen"></i>&nbsp;
                <span class="datetime" data-updated="Wed Apr 16 2025 07:47:24 GMT+0000">2025-04-16 07:47</span>
            </span>
        

        
            <span class="meta-info-item post-category border-box"><i class="icon fas fa-folder"></i>&nbsp;
                <ul class="post-category-ul">
                    
                            <li class="category-item"><a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a></li>
                        
                    
                </ul>
            </span>
        

        
            <span class="post-tag meta-info-item border-box">
                <ul class="post-tag-ul">
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/Hive/">Hive</a></li>
                        
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a></li>
                        
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/Hadoop/">Hadoop</a></li>
                        
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/Spark/">Spark</a></li>
                        
                    
                </ul>
            </span>
        

        
        
            <span class="meta-info-item post-wordcount">
                <i class="icon fas fa-file-word"></i>&nbsp;<span>5.6k 字</span>
            </span>
        
        
            <span class="meta-info-item post-min2read">
                <i class="icon fas fa-clock"></i>&nbsp;<span>27 分钟</span>
            </span>
        
        
            <span class="meta-info-item post-pv">
                <i class="icon fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
            </span>
        
    </div>

    
</div>

                            </div>
                        </div>
                    </div>
                

                <div class="post-content keep-markdown-body">
                    

                    <h1 id="hadoop搭建">1. Hadoop搭建</h1>
<h2 id="虚拟机准备">1.1 虚拟机准备</h2>
<p>在本地<code>VMware</code>软件中安装三台<code>CentOS 7</code>的虚拟机，充当集群。安装完成后分别配置主机名和IP为如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">192.168.10.100 cluster100</span><br><span class="line">192.168.10.101 cluster101</span><br><span class="line">192.168.10.102 cluster102</span><br></pre></td></tr></table></figure>
<p>同时关闭所有服务器的防火墙。</p>
<span id="more"></span>
<h2 id="java安装">1.2 Java安装</h2>
<p>下载<code>jdk1.8</code>版本的<code>Java</code>环境，解压到<code>/opt/module</code>目录中。同时配置环境变量。</p>
<p>在<code>/etc/profile.d/my_env.sh</code>中添加以下内容：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=/opt/module/jdk1.8</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</span><br></pre></td></tr></table></figure>
<p>刷新环境变量。然后执行<code>java -version</code>命令，显示Java版本表示安装成功。</p>
<img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240328231954983.png" class="" title="image-20240328231954983">
<h2 id="hadoop安装">1.3 Hadoop安装</h2>
<p>下载<code>hadoop3.1.3</code>版本的Hadoop压缩包，解压到<code>/opt/module</code>目录中。同时配置环境变量。</p>
<p>在<code>/etc/prodile.d/my_env.sh</code>中添加一下内容：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> HADOOP_HOME=/opt/module/hadoop3.1.3</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$HADOOP_HOME</span>/bin</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$HADOOP_HOME</span>/sbin</span><br></pre></td></tr></table></figure>
<p>刷新环境变量。然后执行<code>hadoop version</code>命令，显示版本表示安装成功。</p>
<style>.mdtsegcjsjij{zoom: 67%;}</style>
<img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240328232348889.png" class="mdtsegcjsjij" alt="image-20240328232348889">
<h2 id="hadoop分布式运行模式">1.4 Hadoop分布式运行模式</h2>
<p>首先将上边安装的Java环境、Hadoop环境和环境变量文件同步到另外两台服务器中。可以使用<code>scp</code>命令发送文件和目录。</p>
<h3 id="集群规划">1.4.1 集群规划</h3>
<table>
<colgroup>
<col style="width: 4%">
<col style="width: 24%">
<col style="width: 36%">
<col style="width: 34%">
</colgroup>
<thead>
<tr>
<th></th>
<th>cluster100</th>
<th>cluster101</th>
<th>cluster102</th>
</tr>
</thead>
<tbody>
<tr>
<td>HDFS</td>
<td>NameNode<br>DataNode</td>
<td>DataNode</td>
<td>SecondaryNameNode<br>DataNode</td>
</tr>
<tr>
<td>YARN</td>
<td>NodeManager</td>
<td>ResourceManager<br>NodeManager</td>
<td>NodeManager</td>
</tr>
</tbody>
</table>
<h3 id="集群配置">1.4.2 集群配置</h3>
<p>集群配置主要有4个配置文件，都存储在<code>$HADOOP_HOME/etc/hadoop</code>目录中，分别是<strong>core-site.xml</strong>、<strong>hdfs-site.xml</strong>、<strong>yarn-site.xml</strong>和<strong>mapred-site.xml</strong>，这四个配置文件分别对应<strong>hadoop核心配置</strong>、<strong>hdfs配置</strong>、<strong>yarn配置</strong>和<strong>map
reduce配置</strong>。</p>
<h4 id="核心配置">1.4.2.1 核心配置</h4>
<p>编辑<code>core-site.xml</code>，在<code>&lt;configuration&gt;&lt;/configuration&gt;</code>添加以下内容：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 指定NameNode的地址 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://cluster100:8020<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 指定hadoop数据的存储目录 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/opt/module/hadoop3.1.3/data<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 配置HDFS网页登录使用的静态用户为lishan --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.http.staticuser.user<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>lishan<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="hdfs配置">1.4.2.2 HDFS配置</h4>
<p>编辑<code>hdfs-site.xml</code>，添加以下内容：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- NameNode web端访问地址--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.http-address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>cluster100:9870<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- SecondaryNameNode web端访问地址--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.secondary.http-address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>cluster102:9868<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="yarn配置">1.4.2.3 YARN配置</h4>
<p>编辑<code>yarn-site.xml</code>，添加以下内容：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 指定MR走shuffle --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 指定ResourceManager的地址--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>cluster101<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 环境变量的继承 --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.env-whitelist<span class="tag">&lt;/<span class="name">name</span>&gt;</span><span class="tag">&lt;<span class="name">value</span>&gt;</span>JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="mapreduce配置">1.4.2.4 MapReduce配置</h4>
<p>编辑<code>mapred-site.xml</code>，添加以下内容：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 指定MapReduce程序运行在Yarn上 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="节点配置">1.4.2.5 节点配置</h4>
<p>编辑<code>$HADOOP_HOME/etc/hadoop</code>目录下的<code>workers</code>文件，把所有节点添加至文件中：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cluster100</span><br><span class="line">cluster101</span><br><span class="line">cluster102</span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong>该文件中不得有空行，每行末尾不允许有空格</p>
<h4 id="分发配置">1.4.2.6 分发配置</h4>
<p>将配置好的文件分发到其他服务器（<code>cluster101 cluster102</code>）。</p>
<h3 id="集群启动">1.4.3 集群启动</h3>
<p><mark>如果是第一次启动，需要在<code>NameNode</code>所在节点(<code>cluster100</code>)格式化<code>NameNode</code></mark>。执行命令<code>hdfs namenode -format</code>格式化。</p>
<img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329101123350.png" class="" title="image-20240329101123350">
<p>打印该日志信息表示格式化成功。</p>
<ol type="1">
<li><p>hdfs启动</p>
<p>使用<code>$HADOOP_HOME/sbin/start-dfs.sh</code>启动<code>hdfs</code>，由于配置了环境变量，也可以直接使用<code>start-dfs.sh</code>命令。</p>
<p>打印出以下信息表示启动成功。</p>
<p><img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329101643906.png" class="" title="image-20240329101643906"></p>
<p>然后输入<code>jps</code>，查看正在运行的进程。</p>
<p><img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329101752160.png" class="" title="image-20240329101752160"></p>
<p>可以看到<code>DataNode</code>和<code>NameNode</code>都启动了。</p>
<p>在<code>cluster102</code>中也查看进程，可以看到<code>SecondNameNode</code>也启动了，符合最开始的规划。</p>
<p><img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329102406000.png" class="" title="image-20240329102406000"></p></li>
<li><p>启动Yarn</p>
<p>设计的<code>Yarn</code>需要配置在<code>cluster101</code>中，所以需要在<code>cluster101</code>中启动yarn。使用命令<code>start-yarn.sh</code>启动。</p>
<p>启动后使用<code>jps</code>查看进程。</p>
<p><img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329102510717.png" class="" title="image-20240329102510717"></p>
<p>可以看到<code>ResourceManager</code>启动了。</p></li>
<li><p>查看信息</p>
<p>进入<code>192.168.10.100:9870</code>查看HDFS的相关信息。</p>
<p><style>.zgjvoxysnegg{zoom: 33%;}</style><img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329103104664.png" class="zgjvoxysnegg" alt="image-20240329103104664"></p>
<p>进入<code>192.168.10.101:8088</code>查看Yarn相关信息。</p>
<p><style>.rzwaogdedflk{zoom: 33%;}</style><img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329103141506.png" class="rzwaogdedflk" alt="image-20240329103141506"></p>
<p>展示以上页面表明安装成功，hdfs和yarn已经成功启动。</p></li>
</ol>
<h3 id="配置历史服务器">1.4.4 配置历史服务器</h3>
<p>该服务器可以查看程序的历史运行情况。</p>
<p>编辑<code>mapred-site.xml</code>文件，添加一下内容：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 历史服务器端地址 --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>cluster100:10020<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- 历史服务器web端地址 --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.webapp.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>cluster100:19888<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br></pre></td></tr></table></figure>
<p>配置好后将该配置文件分发到其他节点。然后使用命令<code>mapred --daemon start historyserver</code>启动历史服务器。</p>
<p>通过配置的端口访问Web页面，正常显示页面，证明历史服务器已经启动。</p>
<style>.xxjpphfeuojj{zoom: 33%;}</style>
<img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329104903290.png" class="xxjpphfeuojj" alt="image-20240329104903290">
<h3 id="配置日志聚集功能">1.4.5 配置日志聚集功能</h3>
<p>配置日志聚集可以将所有服务器的运行日志聚集到HDFS中，方便统一查看。</p>
<p>配置<code>yarn-site.xml</code>，添加以下内容：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 开启日志聚集功能 --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log-aggregation-enable<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- 设置日志聚集服务器地址 --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log.server.url<span class="tag">&lt;/<span class="name">name</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>http://cluster10:19888/jobhistory/logs<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- 设置日志保留时间为7天 --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log-aggregation.retain-seconds<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>604800<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br></pre></td></tr></table></figure>
<p>将配置分发到其他节点。</p>
<p><mark>注意：配置日志聚集功能，需要重新启动<code>NodeManager</code>、<code>ResourceManager</code>和<code>HistoryServer</code></mark>。</p>
<p>需要在<code>cluster101</code>中使用<code>stop-yarn.sh</code>关闭yarn，然后使用<code>mapred --daemon stop historyserver</code>关闭历史服务器。</p>
<h1 id="zookeeper安装">2. Zookeeper安装</h1>
<h2 id="下载">2.1 下载</h2>
<p>去官网(https://zookeeper.apache.org/)下载<code>Zookeeper</code>的tar包，这里选择<code>3.5.7</code>的版本。</p>
<p>采用集群部署方式安装Zookeeper，规划在三台节点都安装上Zookeeper。</p>
<p>首先将下载好的tar包解压到<code>/opt/module</code>目录中。</p>
<p><code>tar -zxvf apache-zookeeper-3.5.7-bin.tar.gz -C /opt/module/</code></p>
<h2 id="安装">2.2 安装</h2>
<ol type="1">
<li><p>配置服务器编号</p>
<p>在<code>/opt/module/zookeeper3.5.7</code>目录中创建目录<code>zkData</code>，并在这个目录新建<code>myid</code>文件。</p>
<p>写入内容为：</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0</span><br></pre></td></tr></table></figure></p>
<p><strong>注意：</strong>不能空行，末尾不能有空格。</p>
<p>分发zookeeper到其他服务器。然后分别在<code>cluster101</code>修改<code>myid</code>内容为<code>1</code>，<code>cluster102</code>修改为<code>2</code>。</p></li>
<li><p>配置<code>zoo.cfg</code>文件</p>
<p>重命名<code>zookeeper3.5.7/conf</code>
目录下的<code>zoo_sample.cfg</code>为<code>zoo.cfg</code>。修改数据存储位置：</p>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dataDir=/opt/module/zookeeper3.5.7/zkData</span><br></pre></td></tr></table></figure></p>
<p>并添加以下内容：</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#######################cluster########################## </span></span><br><span class="line">server.0=cluster100:2888:3888 </span><br><span class="line">server.1=cluster101:2888:3888 </span><br><span class="line">server.2=cluster102:2888:3888 </span><br></pre></td></tr></table></figure></p>
<p><code>server.A=B:C:D</code>表示A号服务器的地址是B，Fllower服务器与集群中的Leader服务器使用C端口交换信息，如果集群中的Leader服务器崩溃，使用D号端口重新选举Leader。其中A即为<code>myid</code>中写入的编号。</p>
<p>同步该配置文件到其他服务器。</p></li>
<li><p>集群启动</p>
<p>分别在三台节点执行<code>bin/zkServer.sh start</code>。</p>
<p>显示如下信息表示启动成功。</p>
<p><style>.iqeiqnbhhuwu{}</style><img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329123004716.png" class="iqeiqnbhhuwu" alt="image-20240329123004716"></p></li>
</ol>
<style>.qzuqqtfmnxqh{}</style>
<img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329123020680.png" class="qzuqqtfmnxqh" alt="image-20240329123020680">
<img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329123052274.png" class="" title="image-20240329123052274">
<h1 id="hbase安装">3. Hbase安装</h1>
<h2 id="下载-1">3.1 下载</h2>
<p>首先去官网下载HBase安装包，这里选择的是2.4.11的版本。</p>
<p>解压到<code>/opt/module</code>目录中，并修改名字为：<code>hbase2.4.11</code>。</p>
<p>并在<code>/etc/profile.d/my_env.sh</code>添加环境变量</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> HBASE_HOME=/opt/module/hbase2.4.11</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$HBASE_HOME</span>/bin</span><br></pre></td></tr></table></figure>
<h2 id="安装-1">3.2 安装</h2>
<h3 id="配置">3.2.1 配置</h3>
<ol type="1">
<li><p>配置hbase-env.sh</p>
<p>修改<code>conf/hbase-env.sh</code>中的内容<code>export HBASE_MANAGES_ZK=false</code></p></li>
<li><p>修改hbase-site.xml</p>
<p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">     <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.zookeeper.quorum<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">     <span class="tag">&lt;<span class="name">value</span>&gt;</span>clister100,cluster101,cluster102<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line">     <span class="tag">&lt;<span class="name">description</span>&gt;</span>The directory shared by RegionServers. </span><br><span class="line">     <span class="tag">&lt;/<span class="name">description</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span>  </span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.rootdir<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://clister100:8020/hbase<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>The directory shared by RegionServers. </span><br><span class="line">    <span class="tag">&lt;/<span class="name">description</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.cluster.distributed<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br></pre></td></tr></table></figure></p></li>
<li><p>修改regionservers</p>
<p>修改为如下内容：</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cluster100</span><br><span class="line">cluster101</span><br><span class="line">cluster102</span><br></pre></td></tr></table></figure></p></li>
<li><p>解决兼容性问题</p>
<p>解决hbase和hadoop的log4j兼容性问题，修改hbase的jar包使用hadoop的jar包。</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> /opt/module/hbase2.4.11/lib/client-facing-thirdparty/slf4j-reload4j-1.7.33.jar /opt/module/hbase2.4.11/lib/client-facing-thirdparty/slf4j-reload4j-1.7.33.jar.bak </span><br></pre></td></tr></table></figure></p></li>
</ol>
<p>将修改好的hbase分发到其他服务器。</p>
<h3 id="启动">3.2.2 启动</h3>
<p>执行命令<code>start-hbase.sh</code>。显示一下信息启动成功。</p>
<p>访问<code>192.168.10.100:16010</code>出现hbase的页面，启动成功。</p>
<img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329125724884.png" class="" title="image-20240329125724884">
<style>.uvdrfrgyyemf{zoom:50%;}</style>
<img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329130146971.png" class="uvdrfrgyyemf" alt="image-20240329130146971">
<h1 id="mysql安装">4. MySQL安装</h1>
<p>下载<code>mysql-xxx.tar</code>安装包和<code>mysql</code>驱动jar包。</p>
<h2 id="安装-2">4.1 安装</h2>
<ol type="1">
<li><p>解压安装包</p></li>
<li><p>卸载自带的mariadb</p>
<p><code>sudo rpm -qa | grep mariadb | xargs sudo rpm -e --nodeps</code></p></li>
<li><p>安装MySQL依赖</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo rpm -ivh mysql-community-common-5.7.28-1.el7.x86_64.rpm</span><br><span class="line">sudo rpm -ivh mysql-community-libs-5.7.28-1.el7.x86_64.rpm</span><br><span class="line">sudo rpm -ivh mysql-community-libs-compat-5.7.28-1.el7.x86_64.rpm</span><br></pre></td></tr></table></figure></p></li>
<li><p>安装client和server</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo rpm -ivh mysql-community-client-5.7.28-1.el7.x86_64.rpm</span><br><span class="line">sudo rpm -ivh mysql-community-server-5.7.28-1.el7.x86_64.rpm</span><br></pre></td></tr></table></figure></p></li>
<li><p>启动</p>
<p><code>systemctl start mysqld</code></p></li>
<li><p>查看msyql密码</p>
<p><code>sudo cat /var/log/mysqld.log | grep password</code></p></li>
</ol>
<h2 id="配置-1">4.2 配置</h2>
<ol type="1">
<li><p>密码配置</p>
<p>个人学习可以配置一个简单的密码。</p>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set global validate_password_policy=0;</span><br><span class="line">set global validate_password_length=4;</span><br></pre></td></tr></table></figure></p>
<p>设置密码验证策略为最低。</p></li>
<li><p>设置密码</p>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set password=password("123456");</span><br></pre></td></tr></table></figure></p></li>
<li><p>修改登录权限</p>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update user set host="%" where user="root";</span><br></pre></td></tr></table></figure></p>
<p>刷新权限</p>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flush privileges;</span><br></pre></td></tr></table></figure></p></li>
</ol>
<h1 id="hive安装">5. Hive安装</h1>
<p>在官网下载<code>hvie 3.1.3</code>版本tar包。</p>
<h2 id="解压">5.1 解压</h2>
<p>解压tar包到<code>/opt/module</code>中并修改名字为<code>hive3.1.3</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf apache-hive-3.1.3-bin.tar.gz -C /opt/module/</span><br></pre></td></tr></table></figure>
<p>添加环境变量</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> HIVE_HOME=/opt/module/hive3.1.3</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$HIVE_HOME</span>/bin</span><br></pre></td></tr></table></figure>
<h2 id="配置元数据存储到mysql中">5.2 配置元数据存储到Mysql中</h2>
<ol type="1">
<li><p>登录MySQL新建元数据库</p>
<p><code>create database metastore;</code></p></li>
<li><p>设置jdbc驱动</p>
<p>将MySQL的jdbc驱动拷贝到hive的lib目录下</p>
<p><code>cp /opt/software/mysql-connector-java-5.1.37-bin.jar /opt/module/hive3.1.3/lib/</code></p></li>
<li><p>配置hvie-site.xml</p>
<p>在conf目录下新建<code>hive-site.xml</code>文件，添加如下内容：</p>
<p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type=<span class="string">"text/xsl"</span> href=<span class="string">"configuration.xsl"</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- jdbc连接的URL --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionURL<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>jdbc:mysql://cluster100:3306/metastore?useSSL=false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- jdbc连接的Driver--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionDriverName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">	<span class="comment">&lt;!-- jdbc连接的username--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionUserName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>root<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- jdbc连接的password --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionPassword<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Hive默认在HDFS的工作目录 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.warehouse.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/hive/warehouse<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></p></li>
<li><p>初始化</p>
<p>初始化hive源数据库。</p>
<p><code>schematool -dbType mysql -initSchema -verbose</code></p>
<p>如果出现报错：<style>.weoiyvrikbex{zoom:
50%;}</style><img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329140900505.png" class="weoiyvrikbex" alt="image-20240329140900505"></p>
<p>是包版本的问题，将<code>hadoop</code>中相关的<code>guava</code>复制到<code>hive</code>中即可。</p>
<p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm hive3.1.3/lib/guava-19.0.jar </span><br><span class="line">cp hadoop3.1.3/share/hadoop/common/lib/guava-27.0-jre.jar hive3.1.3/lib/</span><br></pre></td></tr></table></figure></p>
<p><img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329141035049.png" class="" title="image-20240329141035049"></p>
<p>打印以上信息表示初始化成功。</p>
<p>登录MySQL数据库，查看<code>metastore</code>数据库中的所有表。</p>
<p><style>.jnwdqfphtjyf{zoom: 50%;}</style><img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329141212222.png" class="jnwdqfphtjyf" alt="image-20240329141212222"></p>
<p>可以看到有了元数据信息。</p></li>
</ol>
<h2 id="hive服务部署">5.3 Hive服务部署</h2>
<h3 id="hiveserver2部署">5.3.1 hiveserver2部署</h3>
<p>修改hadoop下的<code>core-site.xml</code>配置文件。增加如下配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置所有节点的lishan用户都可作为代理用户--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.proxyuser.lishan.hosts<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>*<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--配置lishan用户能够代理的用户组为任意组--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.proxyuser.lishan.groups<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>*<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--配置lishan用户能够代理的用户为任意用户--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.proxyuser.lishan.users<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>*<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>修改hive下的<code>hive-site.xml</code>，增加如下信息：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 指定hiveserver2连接的host --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.server2.thrift.bind.host<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">value</span>&gt;</span>cluster100<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 指定hiveserver2连接的端口号 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.server2.thrift.port<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">value</span>&gt;</span>10000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>使用命令<code>hive --service hiveserver2</code>启动<code>hiveserver2</code>，然后在另一个终端执行<code>beeline -u jdbc:hive2://cluster100:10000 -n lishan</code>后看到如下信息：</p>
<style>.cphlonfyyhyl{zoom: 67%;}</style>
<img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329142130328.png" class="cphlonfyyhyl" alt="image-20240329142130328">
<p>启动成功。</p>
<h3 id="metastore服务">5.3.2 metastore服务</h3>
<p>修改hive下的<code>hive-site.xml</code>，添加内容：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 指定metastore服务的地址 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.uris<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">value</span>&gt;</span>thrift://cluster100:9083<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>启动<code>metastore</code>服务，<code>hive --service metastore</code>，在另一个终端启动hive，查看数据库，正常访问。</p>
<h1 id="spark安装">6. Spark安装</h1>
<h2 id="下载-2">6.1 下载</h2>
<p>这里下载的<code>spark 3.0.0</code>版本。</p>
<p>解压到<code>/opt/module</code>中，并修改名为：<code>spark3.0.0</code>。</p>
<h2 id="yarn模式配置">6.2 Yarn模式配置</h2>
<p>修改hadoop下的<code>yarn-site.xml</code>文件，添加内容：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--是否启动一个线程检查每个任务正使用的物理内存量，如果任务超出分配值，则直接将其杀掉，默认是true --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.pmem-check-enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line"><span class="comment">&lt;!--是否启动一个线程检查每个任务正使用的虚拟内存量，如果任务超出分配值，则直接将其杀掉，默认是true --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.vmem-check-enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br></pre></td></tr></table></figure>
<p>将spark下的<code>conf/spark-env.sh.template</code>重命名为<code>spark-evn.sh</code>并添加：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=/opt/module/jdk1.8</span><br><span class="line">YARN_CONF_DIR=/opt/module/hadoop3.1.3/etc/hadoop</span><br></pre></td></tr></table></figure>
<p>分发到所有服务器。</p>
<h2 id="配置历史服务器-1">6.3 配置历史服务器</h2>
<p>重命名<code>spark</code>目录下的<code>mv conf/spark-defaults.conf.template conf/spark-defaults.conf</code>。并修改该文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spark.eventLog.enabled           <span class="literal">true</span></span><br><span class="line">spark.eventLog.<span class="built_in">dir</span>               hdfs://cluster100:8020/directory</span><br></pre></td></tr></table></figure>
<p>然后在hdfs上新建该目录：<code>hadoop fs -mkdir /directory</code></p>
<p>修改<code>spark-env.sh</code>，添加日志配置。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> SPARK_HISTORY_OPTS=<span class="string">"</span></span><br><span class="line"><span class="string">-Dspark.history.ui.port=18080</span></span><br><span class="line"><span class="string">-Dspark.history.fs.logDirectory=hdfs://cluster100:8020/directory</span></span><br><span class="line"><span class="string">-Dspark.history.retainedApplications=30"</span></span><br></pre></td></tr></table></figure>
<p>修改<code>spark-defaults.conf</code>文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spark.yarn.historyServer.address=cluster100:18080</span><br><span class="line">spark.history.ui.port=18080</span><br></pre></td></tr></table></figure>
<p>启动历史服务<code>sbin/start-history-server.sh</code></p>
<h1 id="kafka安装">7. Kafka安装</h1>
<h2 id="下载-3">7.1下载</h2>
<p>下载版本为：<code>kafka 2.12-3.0.0</code>。解压到<code>/opt/module</code>并修改名<code>kafka3.0.0</code>。</p>
<p>添加环境变量</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> KAFKA_HOME=/opt/module/kafka3.0.0</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$KAFKA_HOME</span>/bin</span><br></pre></td></tr></table></figure>
<h2 id="配置-2">7.2配置</h2>
<p>进入kafka目录，修改<code>config/server.properties</code>文件，修改以下内容：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#broker的全局唯一编号，不能重复，只能是数字。</span></span><br><span class="line"><span class="attr">broker.id</span>=<span class="string">0</span></span><br><span class="line"><span class="comment">#处理网络请求的线程数量</span></span><br><span class="line"><span class="attr">num.network.threads</span>=<span class="string">3</span></span><br><span class="line"><span class="comment">#用来处理磁盘IO的线程数量</span></span><br><span class="line"><span class="attr">num.io.threads</span>=<span class="string">8</span></span><br><span class="line"><span class="comment">#发送套接字的缓冲区大小</span></span><br><span class="line"><span class="attr">socket.send.buffer.bytes</span>=<span class="string">102400</span></span><br><span class="line"><span class="comment">#接收套接字的缓冲区大小</span></span><br><span class="line"><span class="attr">socket.receive.buffer.bytes</span>=<span class="string">102400</span></span><br><span class="line"><span class="comment">#请求套接字的缓冲区大小</span></span><br><span class="line"><span class="attr">socket.request.max.bytes</span>=<span class="string">104857600</span></span><br><span class="line"><span class="comment">#kafka运行日志(数据)存放的路径，路径不需要提前创建，kafka自动帮你创建，可以配置多个磁盘路径，路径与路径之间可以用"，"分隔</span></span><br><span class="line"><span class="attr">log.dirs</span>=<span class="string">/opt/module/kafka3.0.0/datas</span></span><br><span class="line"><span class="comment">#topic在当前broker上的分区个数</span></span><br><span class="line"><span class="attr">num.partitions</span>=<span class="string">1</span></span><br><span class="line"><span class="comment">#用来恢复和清理data下数据的线程数量 </span></span><br><span class="line"><span class="attr">num.recovery.threads.per.data.dir</span>=<span class="string">1 </span></span><br><span class="line"><span class="comment"># 每个topic创建时的副本数，默认时1个副本 </span></span><br><span class="line"><span class="attr">offsets.topic.replication.factor</span>=<span class="string">1 </span></span><br><span class="line"><span class="comment">#segment文件保留的最长时间，超时将被删除 </span></span><br><span class="line"><span class="attr">log.retention.hours</span>=<span class="string">168</span></span><br><span class="line"><span class="comment">#每个segment文件的大小，默认最大1G</span></span><br><span class="line"><span class="attr">log.segment.bytes</span>=<span class="string">1073741824</span></span><br><span class="line"><span class="comment"># 检查过期数据的时间，默认5分钟检查一次是否数据过期</span></span><br><span class="line"><span class="attr">log.retention.check.interval.ms</span>=<span class="string">300000</span></span><br><span class="line"><span class="comment">#配置连接Zookeeper集群地址（在zk根目录下创建/kafka，方便管理）</span></span><br><span class="line"><span class="attr">zookeeper.connect</span>=<span class="string">cluster100:2181,cluster101:2181,cluster102:2181/kafka</span></span><br></pre></td></tr></table></figure>
<p>分发kafka和环境变量文件到其他服务器。修改<code>cluster101</code>的<code>borker.id</code>为1，<code>cluster102</code>的<code>borker.id</code>为2.</p>
<h2 id="启动-1">7.3 启动</h2>
<p>在zookeeper集群启动的情况下启动kafka。</p>
<p>在每个节点上分别启动kafka。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-server-start.sh -daemon config/server.properties</span><br></pre></td></tr></table></figure>
<p>使用jps查看进程</p>
<style>.eocfmmjeldiw{zoom:67%;}</style>
<img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329153812585.png" class="eocfmmjeldiw" alt="image-20240329153812585">
<p>可以看到kafka已经启动了。</p>
<h1 id="storm安装">8. Storm安装</h1>
<p>下载<code>storm 1.2.4</code>版本。并解压到<code>/opt/module</code>中修改名为<code>storm1.2.4</code>。</p>
<h2 id="配置-3">8.1 配置</h2>
<p>修改<code>conf</code>下的<code>storm.yaml</code>文件。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">storm.zookeeper.servers:</span></span><br><span class="line">     <span class="bullet">-</span> <span class="string">"cluster100"</span></span><br><span class="line">     <span class="bullet">-</span> <span class="string">"cluster101"</span></span><br><span class="line">     <span class="bullet">-</span> <span class="string">"cluster102"</span></span><br><span class="line"><span class="attr">nimbus.host:</span> <span class="string">"cluster100"</span></span><br><span class="line"><span class="attr">storm.local.dir:</span> <span class="string">"/opt/module/storm1.2.4/data"</span></span><br><span class="line"><span class="attr">ui.port:</span> <span class="number">8888</span></span><br><span class="line"><span class="attr">supervisor.slots.ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="number">6700</span></span><br><span class="line">    <span class="bullet">-</span> <span class="number">6701</span></span><br><span class="line">    <span class="bullet">-</span> <span class="number">6702</span></span><br></pre></td></tr></table></figure>
<p>将storm分发到其他节点</p>
<h2 id="启动-2">8.2 启动</h2>
<p>在<code>cluster100</code>启动：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nohup /opt/module/storm1.2.4/bin/storm nimbus &gt; /opt/module/storm1.2.4/output.log 2&gt;&amp;1 &amp;</span><br><span class="line">nohup /opt/module/storm1.2.4/bin/storm ui &gt; /opt/module/storm1.2.4/output.log 2&gt;&amp;1 &amp;</span><br><span class="line">nohup /opt/module/storm1.2.4/bin/storm logviewer &gt; /opt/module/storm1.2.4/output.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure>
<p>另外两个节点启动：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup /opt/module/storm1.2.4/bin/storm supervisor &gt; /opt/module/storm1.2.4/output.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure>
<p><code>cluster100</code>查看进程，出现<code>core nimbus logviewer</code>即成功。</p>
<style>.lchtgdtnthpp{zoom:67%;}</style>
<img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329155911737.png" class="lchtgdtnthpp" alt="image-20240329155911737">
<p>另外两个节点出现<code>supervisor</code></p>
<style>.pxxornqtnafb{zoom:67%;}</style>
<img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329155943569.png" class="pxxornqtnafb" alt="image-20240329155943569">
<h1 id="cassandra安装">9. Cassandra安装</h1>
<p>下载版本为<code>cassandra 3.11.10</code>的版本。完成后解压到<code>/opt/module</code>并修改名为：<code>cassandra3.11.10</code></p>
<h2 id="配置-4">9.1 配置</h2>
<p>在<code>cassandra</code>目录下新建<code>data commitlog saved_caches</code>三个目录。</p>
<p>修改<code>conf/cassandra.yaml</code>文件。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data_file_directories:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">/opt/module/cassandra3.11.10/data</span></span><br><span class="line"><span class="attr">commitlog_directory:</span> <span class="string">/opt/module/cassandra3.11.10/commitlog</span></span><br><span class="line"><span class="attr">saved_caches_directory:</span> <span class="string">/opt/module/cassandra3.11.10/saved_caches</span></span><br></pre></td></tr></table></figure>
<h2 id="启动-3">9.2 启动</h2>
<p>执行命令<code>bin/cassandra</code>启动。然后再开一个终端，执行命令<code>bin/cqlsh</code>。显示以下内容：</p>
<style>.lrsdehurowot{zoom:67%;}</style>
<img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329164052052.png" class="lrsdehurowot" alt="image-20240329164052052">
<p>启动成功。</p>
<h2 id="添加开机自启">9.3 添加开机自启</h2>
<p><code>vim /usr/lib/systemd/system/cassandra.service</code>创建服务文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Cassandra Server Service</span><br><span class="line">After=network.service</span><br><span class="line"> </span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">Environment=JAVA_HOME=/opt/module/jdk1.8</span><br><span class="line"> </span><br><span class="line">PIDFile=/usr/local/cassandra/cassandra.pid</span><br><span class="line"><span class="comment"># 新建一个用户和用户组，Cassandra无法使用root账号启动</span></span><br><span class="line">User=lishan</span><br><span class="line">Group=lishan</span><br><span class="line"><span class="comment"># 此处为Cassandra包解压后的路径</span></span><br><span class="line">ExecStart=/opt/module/cassandra3.11.10/bin/cassandra -f -p /usr/local/cassandra/cassandra.pid</span><br><span class="line">StandardOutput=journal</span><br><span class="line">StandardError=journal</span><br><span class="line">LimitNOFILE=100000</span><br><span class="line">LimitMEMLOCK=infinity</span><br><span class="line">LimitNPROC=32768</span><br><span class="line">LimitAS=infinity</span><br><span class="line"> </span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>
<p>然后刷新服务，设置开机自启</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl start cassandra</span><br><span class="line">sudo systemctl enable cassandra</span><br></pre></td></tr></table></figure>
<h1 id="各框架简单操作">10. 各框架简单操作</h1>
<h2 id="hadoop">10.1 hadoop</h2>
<p>hadoop基础操作查看hdfs中的文件。有两种方式。</p>
<ol type="1">
<li><p>通过UI页面查看</p>
<p>访问<code>192.168.10.100:9870/explorer.html</code></p>
<p><style>.ohmxudwsjekf{zoom:50%;}</style><img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329170718073.png" class="ohmxudwsjekf" alt="image-20240329170718073">可以查看到目前hdfs中存储的文件。</p></li>
<li><p>通过命令查看。</p>
<p>使用<code>hadoop fs -ls</code>查看目录。</p>
<p><img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329170919933.png" class="" title="image-20240329170919933"></p>
<p>如图，查看根目录下有哪些目录。</p></li>
</ol>
<h2 id="zookeeper使用">10.2 Zookeeper使用</h2>
<p>使用zookeeper目录下的<code>bin/zkServer.sh status</code>命令可以查看到当前节点的状态。</p>
<img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329171645516.png" class="" title="image-20240329171645516">
<h2 id="hbase使用">10.3 HBase使用</h2>
<p>通过访问Web页面，查看信息。</p>
<style>.ohmulttkdrot{zoom: 50%;}</style>
<img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329171932084.png" class="ohmulttkdrot" alt="image-20240329171932084">
<h2 id="hive使用">10.4 Hive使用</h2>
<p>执行命令<code>hive</code>进入<code>hive cli</code>。</p>
<p>创建数据库后查询。</p>
<img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329172331451.png" class="" title="image-20240329172331451">
<p>然后访问hadoop的web页面。查看hdfs的存储数据</p>
<img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329172443749.png" class="" title="image-20240329172443749">
<p>可以在hdfs中找到创建的test数据库。</p>
<h2 id="spark使用">10.5 Spark使用</h2>
<p>进入spark目录，执行如下命令，可以使用spark默认的应用测试spark环境。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">bin/spark-submit \</span><br><span class="line">--class org.apache.spark.examples.SparkPi \</span><br><span class="line">--master yarn \</span><br><span class="line">--deploy-mode client \</span><br><span class="line">./examples/jars/spark-examples_2.12-3.0.0.jar \</span><br><span class="line">10 </span><br></pre></td></tr></table></figure>
<p>运行后，可以进入yarn的页面<code>192.168.10.101:8088</code>，查看到当前正在运行的任务。</p>
<style>.ofkhddfufktv{zoom:50%;}</style>
<img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329172908745.png" class="ofkhddfufktv" alt="image-20240329172908745">
<p>点击任务后的<code>history</code>可以进入到历史页面，查看到任务的历史运行日志。</p>
<style>.qtrcjdiweuos{zoom:50%;}</style>
<img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329173010911.png" class="qtrcjdiweuos" alt="image-20240329173010911">
<h2 id="storm使用">10.6 Storm使用</h2>
<p>可以访问ui页面<code>192.168.10.100:8888</code>查看信息。</p>
<style>.dyjutxepsbmx{zoom:50%;}</style>
<img src="/73233cd329a1/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20240329173220108.png" class="dyjutxepsbmx" alt="image-20240329173220108">
<p>可以看到三个节点都正常运行。</p>
<h1 id="总结">11. 总结</h1>
<p>本次实验学习了大数据集群环境的搭建，了解到了很多大数据相关的组件。和同组的同学一起学习了相关的知识，我们每个人都搭建了一遍大数据的环境，提高了动手能力。</p>
<h1 id="附录">附录</h1>
<p>这次实验中，为了方便集群的操作，写了一些脚本，方便后续使用。(基于尚硅谷hadoop教程)</p>
<p><code>myhadoop</code>: 用于一次性启动和关闭所有相关组件</p>
<p>使用样例<code>myhadoop start</code> <code>myhadoop stop</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash </span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -lt 1 ] </span><br><span class="line"><span class="keyword">then</span> </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"No Args Input..."</span> </span><br><span class="line">    <span class="built_in">exit</span> ; </span><br><span class="line"><span class="keyword">fi</span> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span> </span><br><span class="line"><span class="string">"start"</span>) </span><br><span class="line">        <span class="built_in">echo</span> <span class="string">" =================== 启动 hadoop集群 ==================="</span> </span><br><span class="line"> </span><br><span class="line">        <span class="built_in">echo</span> <span class="string">" --------------- 启动 hdfs ---------------"</span> </span><br><span class="line">        ssh cluster100 <span class="string">"/opt/module/hadoop3.1.3/sbin/start-dfs.sh"</span> </span><br><span class="line">        <span class="built_in">echo</span> <span class="string">" --------------- 启动 yarn ---------------"</span> </span><br><span class="line">        ssh cluster101 <span class="string">"/opt/module/hadoop3.1.3/sbin/start-yarn.sh"</span> </span><br><span class="line">        <span class="built_in">echo</span> <span class="string">" --------------- 启动 historyserver ---------------"</span> </span><br><span class="line">        ssh cluster100 <span class="string">"/opt/module/hadoop3.1.3/bin/mapred --daemon start historyserver"</span> </span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"-------------zookeeper--------------"</span></span><br><span class="line">        ssh cluster100 <span class="string">"/opt/module/zookeeper3.5.7/bin/zkServer.sh start"</span></span><br><span class="line">        ssh cluster101 <span class="string">"/opt/module/zookeeper3.5.7/bin/zkServer.sh start"</span></span><br><span class="line">        ssh cluster102 <span class="string">"/opt/module/zookeeper3.5.7/bin/zkServer.sh start"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"----------hbase ----------------"</span></span><br><span class="line">        ssh cluster100 <span class="string">"/opt/module/hbase2.4.11/bin/start-hbase.sh"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"--------------hiveserver2 metastore-----------"</span></span><br><span class="line">        ssh cluster100 <span class="string">"nohup /opt/module/hive3.1.3/bin/hive --service hiveserver2 &gt; /opt/module/hive3.1.3/output.log 2&gt;&amp;1  &amp;"</span></span><br><span class="line">        ssh cluster100 <span class="string">"nohup /opt/module/hive3.1.3/bin/hive --service metastore &gt; /opt/module/hive3.1.3/output.log 2&gt;&amp;1  &amp;"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"--------spark 历史服务器--------------"</span></span><br><span class="line">        ssh cluster100 <span class="string">"/opt/module/spark3.0.0/sbin/start-history-server.sh"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"--------kafka-------------"</span></span><br><span class="line">        ssh cluster100 <span class="string">"/opt/module/kafka3.0.0/bin/kafka-server-start.sh -daemon /opt/module/kafka3.0.0/config/server.properties"</span></span><br><span class="line">        ssh cluster101 <span class="string">"/opt/module/kafka3.0.0/bin/kafka-server-start.sh -daemon /opt/module/kafka3.0.0/config/server.properties"</span></span><br><span class="line">        ssh cluster102 <span class="string">"/opt/module/kafka3.0.0/bin/kafka-server-start.sh -daemon /opt/module/kafka3.0.0/config/server.properties"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"-----------storm------------"</span></span><br><span class="line">        ssh cluster100 <span class="string">"nohup /opt/module/storm1.2.4/bin/storm nimbus &gt; /opt/module/storm1.2.4/output.log 2&gt;&amp;1 &amp;"</span></span><br><span class="line">        ssh cluster100 <span class="string">"nohup /opt/module/storm1.2.4/bin/storm ui &gt; /opt/module/storm1.2.4/output.log 2&gt;&amp;1 &amp;"</span></span><br><span class="line">        ssh cluster100 <span class="string">"nohup /opt/module/storm1.2.4/bin/storm logviewer &gt; /opt/module/storm1.2.4/output.log 2&gt;&amp;1 &amp;"</span></span><br><span class="line"></span><br><span class="line">        ssh cluster101 <span class="string">"nohup /opt/module/storm1.2.4/bin/storm supervisor &gt; /opt/module/storm1.2.4/output.log 2&gt;&amp;1 &amp;"</span></span><br><span class="line">        ssh cluster102 <span class="string">"nohup /opt/module/storm1.2.4/bin/storm supervisor &gt; /opt/module/storm1.2.4/output.log 2&gt;&amp;1 &amp;"</span></span><br><span class="line">        </span><br><span class="line">        ssh cluster101 <span class="string">"nohup /opt/module/storm1.2.4/bin/storm logviewer &gt; /opt/module/storm1.2.4/output.log 2&gt;&amp;1 &amp;"</span></span><br><span class="line">        ssh cluster102 <span class="string">"nohup /opt/module/storm1.2.4/bin/storm logviewer &gt; /opt/module/storm1.2.4/output.log 2&gt;&amp;1 &amp;"</span></span><br><span class="line"></span><br><span class="line">;; </span><br><span class="line"><span class="string">"stop"</span>) </span><br><span class="line">        <span class="built_in">echo</span> <span class="string">" =================== 关闭 hadoop集群 ==================="</span> </span><br><span class="line"></span><br><span class="line">        ssh cluster100 <span class="string">"jps | grep -E 'core|nimbus|logviewer' | awk '{print \$1}' | xargs kill -9"</span></span><br><span class="line">        ssh cluster101 <span class="string">"jps | grep -E 'Supervisor|logviewer' | awk '{print \$1}' | xargs kill -9"</span></span><br><span class="line">        ssh cluster102 <span class="string">"jps | grep -E 'Supervisor|logviewer' | awk '{print \$1}' | xargs kill -9"</span></span><br><span class="line"></span><br><span class="line">        ssh cluster100 <span class="string">"/opt/module/kafka3.0.0/bin/kafka-server-stop.sh"</span></span><br><span class="line">        ssh cluster101 <span class="string">"/opt/module/kafka3.0.0/bin/kafka-server-stop.sh"</span></span><br><span class="line">        ssh cluster102 <span class="string">"/opt/module/kafka3.0.0/bin/kafka-server-stop.sh"</span></span><br><span class="line"> </span><br><span class="line">        ssh cluster100 <span class="string">"/opt/module/spark3.0.0/sbin/stop-history-server.sh"</span></span><br><span class="line"></span><br><span class="line">        ssh cluster100 <span class="string">"jps | grep RunJar | awk '{print \$1}' | xargs kill -9"</span></span><br><span class="line"></span><br><span class="line"> 		ssh cluster100 <span class="string">"/opt/module/hbase2.4.11/bin/stop-hbase.sh"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> 		ssh cluster100 <span class="string">"/opt/module/zookeeper3.5.7/bin/zkServer.sh stop"</span></span><br><span class="line"> 		ssh cluster101 <span class="string">"/opt/module/zookeeper3.5.7/bin/zkServer.sh stop"</span></span><br><span class="line"> 		ssh cluster102 <span class="string">"/opt/module/zookeeper3.5.7/bin/zkServer.sh stop"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">" --------------- 关闭 historyserver ---------------"</span> </span><br><span class="line">        ssh cluster100 <span class="string">"/opt/module/hadoop3.1.3/bin/mapred --daemon stop historyserver"</span> </span><br><span class="line">        <span class="built_in">echo</span> <span class="string">" --------------- 关闭 yarn ---------------"</span> </span><br><span class="line">        ssh cluster101 <span class="string">"/opt/module/hadoop3.1.3/sbin/stop-yarn.sh"</span> </span><br><span class="line">        <span class="built_in">echo</span> <span class="string">" --------------- 关闭 hdfs ---------------"</span> </span><br><span class="line">        ssh cluster100 <span class="string">"/opt/module/hadoop3.1.3/sbin/stop-dfs.sh"</span> </span><br><span class="line">;; </span><br><span class="line">*) </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"Input Args Error..."</span> </span><br><span class="line">;; </span><br><span class="line"><span class="keyword">esac</span> </span><br></pre></td></tr></table></figure>
<p><code>xsync</code>: 用于同步目录或文件到所有节点。</p>
<p>使用样例 <code>xsync /opt/module/spark</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash </span></span><br><span class="line"><span class="comment">#1. 判断参数个数 </span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -lt 1 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> Not Enough Arguement! </span><br><span class="line">        <span class="built_in">exit</span>;</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">#2. 遍历集群所有机器 </span></span><br><span class="line"><span class="keyword">for</span> host <span class="keyword">in</span> cluster100 cluster101 cluster102</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> ====================  <span class="variable">$host</span>  ==================== </span><br><span class="line">    <span class="comment">#3. 遍历所有目录发送 </span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> file <span class="keyword">in</span> <span class="variable">$@</span></span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        <span class="comment">#4. 判断文件是否存在 </span></span><br><span class="line">        <span class="keyword">if</span> [ -e <span class="variable">$file</span> ]</span><br><span class="line">            <span class="keyword">then</span></span><br><span class="line">                <span class="comment">#5. 获取父目录 </span></span><br><span class="line">                pdir=$(<span class="built_in">cd</span> -P $(<span class="built_in">dirname</span> <span class="variable">$file</span>); <span class="built_in">pwd</span>)</span><br><span class="line"></span><br><span class="line">                <span class="comment">#6. 获取当前文件的名称 </span></span><br><span class="line">                fname=$(<span class="built_in">basename</span> <span class="variable">$file</span>)</span><br><span class="line">                ssh <span class="variable">$host</span> <span class="string">"mkdir -p <span class="variable">$pdir</span>"</span></span><br><span class="line">                rsync -av <span class="variable">$pdir</span>/<span class="variable">$fname</span> <span class="variable">$host</span>:<span class="variable">$pdir</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="variable">$file</span> does not exists! </span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p><code>jpsall</code>: 查看所有节点的进程，并展示出来。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> host <span class="keyword">in</span> cluster100 cluster101 cluster102</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        <span class="built_in">echo</span> =============== <span class="variable">$host</span> ===============</span><br><span class="line">        ssh <span class="variable">$host</span> jps</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

                </div>
                
                        
<div class="post-copyright-info-container border-box">
    <div class="copyright-info-content border-box">
        <div class="copyright-info-top border-box">
            <div class="copyright-post-title border-box text-ellipsis">
                大数据环境搭建
            </div>

            <div class="copyright-post-link border-box text-ellipsis">
                73233cd329a1/大数据环境搭建/
            </div>
        </div>

        <div class="copyright-info-bottom border-box">
            <div class="copyright-post-author bottom-item">
                <div class="type">
                    作者
                </div>
                <div class="content">yatbfm</div>
            </div>

            <div class="post-time bottom-item">
                <div class="type">
                    发布于
                </div>
                <div class="content">2023-12-01 21:39</div>
            </div>


            <div class="post-license bottom-item">
                <div class="type">
                    许可
                </div>
                <div class="content tooltip" data-tooltip-content="CC BY-NC-SA 4.0">
                    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans" target="_blank">
                        
                            <i class="fa-brands fa-creative-commons"></i>
                            <i class="fa-brands fa-creative-commons-by"></i>
                            <i class="fa-brands fa-creative-commons-nc"></i>
                            <i class="fa-brands fa-creative-commons-sa"></i>
                        
                    </a>
                </div>
            </div>
        </div>

        <i class="copyright-bg fa-solid fa-copyright"></i>
    </div>
    <div class="copy-copyright-info flex-center tooltip" data-tooltip-content="复制版权信息" data-tooltip-offset-y="-2px">
        <i class="fa-solid fa-copy"></i>
    </div>
</div>

                

                <div class="post-bottom-tags-and-share border-box">
                    <div>
                        
                            <ul class="post-tags-box border-box">
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/Hive/">Hive</a>
                                    </li>
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
                                    </li>
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/Hadoop/">Hadoop</a>
                                    </li>
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/Spark/">Spark</a>
                                    </li>
                                
                            </ul>
                        
                    </div>
                    <div>
                        
                    </div>
                </div>

                

                
                    <div class="post-nav border-box">
                        
                            <div class="prev-post">
                                <a class="prev"
                                   rel="prev"
                                   href="/279f403133fc/hive%E5%AD%A6%E4%B9%A0/"
                                   title="Hive学习"
                                >
                                    <span class="left arrow-icon flex-center">
                                        <i class="fas fa-chevron-left"></i>
                                    </span>
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis">Hive学习</span>
                                        <span class="post-nav-item">上一篇</span>
                                    </span>
                                </a>
                            </div>
                        
                        
                            <div class="next-post">
                                <a class="next"
                                   rel="next"
                                   href="/1a70f07977f9/%E7%89%9B%E5%AE%A2%E7%BD%91sql%E9%A2%98/"
                                   title="牛客网SQL题"
                                >
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis">牛客网SQL题</span>
                                        <span class="post-nav-item">下一篇</span>
                                    </span>
                                    <span class="right arrow-icon flex-center">
                                        <i class="fas fa-chevron-right"></i>
                                    </span>
                                </a>
                            </div>
                        
                    </div>
                

                
                    






                
            </div>
        </div>

        
            <div class="pc-post-toc right-toc">
                <div class="post-toc-wrap border-box">
    <div class="post-toc border-box">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#hadoop%E6%90%AD%E5%BB%BA"><span class="nav-text">1. Hadoop搭建</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%87%86%E5%A4%87"><span class="nav-text">1.1 虚拟机准备</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#java%E5%AE%89%E8%A3%85"><span class="nav-text">1.2 Java安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hadoop%E5%AE%89%E8%A3%85"><span class="nav-text">1.3 Hadoop安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hadoop%E5%88%86%E5%B8%83%E5%BC%8F%E8%BF%90%E8%A1%8C%E6%A8%A1%E5%BC%8F"><span class="nav-text">1.4 Hadoop分布式运行模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E7%BE%A4%E8%A7%84%E5%88%92"><span class="nav-text">1.4.1 集群规划</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE"><span class="nav-text">1.4.2 集群配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE"><span class="nav-text">1.4.2.1 核心配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#hdfs%E9%85%8D%E7%BD%AE"><span class="nav-text">1.4.2.2 HDFS配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#yarn%E9%85%8D%E7%BD%AE"><span class="nav-text">1.4.2.3 YARN配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mapreduce%E9%85%8D%E7%BD%AE"><span class="nav-text">1.4.2.4 MapReduce配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8A%82%E7%82%B9%E9%85%8D%E7%BD%AE"><span class="nav-text">1.4.2.5 节点配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%86%E5%8F%91%E9%85%8D%E7%BD%AE"><span class="nav-text">1.4.2.6 分发配置</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E7%BE%A4%E5%90%AF%E5%8A%A8"><span class="nav-text">1.4.3 集群启动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E5%8E%86%E5%8F%B2%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-text">1.4.4 配置历史服务器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%97%A5%E5%BF%97%E8%81%9A%E9%9B%86%E5%8A%9F%E8%83%BD"><span class="nav-text">1.4.5 配置日志聚集功能</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#zookeeper%E5%AE%89%E8%A3%85"><span class="nav-text">2. Zookeeper安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD"><span class="nav-text">2.1 下载</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-text">2.2 安装</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#hbase%E5%AE%89%E8%A3%85"><span class="nav-text">3. Hbase安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD-1"><span class="nav-text">3.1 下载</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-1"><span class="nav-text">3.2 安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE"><span class="nav-text">3.2.1 配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8"><span class="nav-text">3.2.2 启动</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#mysql%E5%AE%89%E8%A3%85"><span class="nav-text">4. MySQL安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-2"><span class="nav-text">4.1 安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-1"><span class="nav-text">4.2 配置</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#hive%E5%AE%89%E8%A3%85"><span class="nav-text">5. Hive安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%8E%8B"><span class="nav-text">5.1 解压</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E5%85%83%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E5%88%B0mysql%E4%B8%AD"><span class="nav-text">5.2 配置元数据存储到Mysql中</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hive%E6%9C%8D%E5%8A%A1%E9%83%A8%E7%BD%B2"><span class="nav-text">5.3 Hive服务部署</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#hiveserver2%E9%83%A8%E7%BD%B2"><span class="nav-text">5.3.1 hiveserver2部署</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#metastore%E6%9C%8D%E5%8A%A1"><span class="nav-text">5.3.2 metastore服务</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#spark%E5%AE%89%E8%A3%85"><span class="nav-text">6. Spark安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD-2"><span class="nav-text">6.1 下载</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#yarn%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AE"><span class="nav-text">6.2 Yarn模式配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E5%8E%86%E5%8F%B2%E6%9C%8D%E5%8A%A1%E5%99%A8-1"><span class="nav-text">6.3 配置历史服务器</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#kafka%E5%AE%89%E8%A3%85"><span class="nav-text">7. Kafka安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD-3"><span class="nav-text">7.1下载</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-2"><span class="nav-text">7.2配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8-1"><span class="nav-text">7.3 启动</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#storm%E5%AE%89%E8%A3%85"><span class="nav-text">8. Storm安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-3"><span class="nav-text">8.1 配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8-2"><span class="nav-text">8.2 启动</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#cassandra%E5%AE%89%E8%A3%85"><span class="nav-text">9. Cassandra安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-4"><span class="nav-text">9.1 配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8-3"><span class="nav-text">9.2 启动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF"><span class="nav-text">9.3 添加开机自启</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%90%84%E6%A1%86%E6%9E%B6%E7%AE%80%E5%8D%95%E6%93%8D%E4%BD%9C"><span class="nav-text">10. 各框架简单操作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#hadoop"><span class="nav-text">10.1 hadoop</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#zookeeper%E4%BD%BF%E7%94%A8"><span class="nav-text">10.2 Zookeeper使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hbase%E4%BD%BF%E7%94%A8"><span class="nav-text">10.3 HBase使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hive%E4%BD%BF%E7%94%A8"><span class="nav-text">10.4 Hive使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#spark%E4%BD%BF%E7%94%A8"><span class="nav-text">10.5 Spark使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#storm%E4%BD%BF%E7%94%A8"><span class="nav-text">10.6 Storm使用</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-text">11. 总结</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%99%84%E5%BD%95"><span class="nav-text">附录</span></a></li></ol>
    </div>
</div>

            </div>
        
    </div>
</div>


                
            </div>
        </div>

        <div class="page-main-content-bottom border-box">
            
<footer class="footer border-box">
    <div class="border-box website-info-box default">
        
            <div class="copyright-info info-item default">
                &copy;&nbsp;<span>2020</span>&nbsp;-&nbsp;2025
                
                    &nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;&nbsp;<a href="/">yatbfm</a>
                
            </div>

            <div class="theme-info info-item default">
                由&nbsp;<a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;驱动&nbsp;&&nbsp;主题&nbsp;<a class="keep-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep</a>
            </div>

            

            
        

        <div class="count-item info-item default">
            

            
                <span class="count-box border-box uv">
                    <span class="item-type border-box">访客数</span>
                    <span class="item-value border-box uv" id="busuanzi_value_site_uv"></span>
                </span>
            

            
                <span class="count-box border-box pv">
                    <span class="item-type border-box">访问量</span>
                    <span class="item-value border-box pv" id="busuanzi_value_site_pv"></span>
                </span>
            
        </div>
    </div>
</footer>

        </div>
    </div>

    <!-- post tools -->
    
        <div class="post-tools right-toc">
            <div class="post-tools-container border-box">
    <ul class="tools-list border-box">
        <!-- PC TOC show toggle -->
        
            <li class="tools-item flex-center toggle-show-toc">
                <i class="fas fa-list"></i>
            </li>
        

        <!-- PC go comment -->
        

        <!-- PC full screen -->
        <li class="tools-item flex-center full-screen">
            <i class="fa-solid fa-expand"></i>
        </li>
    </ul>
</div>

        </div>
    

    <!-- side tools -->
    <div class="side-tools">
        <div class="side-tools-container border-box ">
    <ul class="side-tools-list side-tools-show-handle border-box">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-toggle-theme-mode flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list border-box">
        
            <li class="tools-item toggle-show-toc-tablet flex-center">
                <i class="fas fa-list"></i>
            </li>
        

        

        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>

        <li class="tools-item tool-scroll-to-top flex-center show-arrow">
            <i class="arrow fas fa-arrow-up"></i>
            <span class="percent"></span>
        </li>
    </ul>
</div>

    </div>

    <!-- image mask -->
    <div class="zoom-in-image-mask">
    <img class="zoom-in-image">
</div>


    <!-- local search -->
    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="搜索..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="close-popup-btn">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

    <!-- tablet toc -->
    
        <div class="tablet-post-toc-mask">
            <div class="tablet-post-toc">
                <div class="post-toc-wrap border-box">
    <div class="post-toc border-box">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#hadoop%E6%90%AD%E5%BB%BA"><span class="nav-text">1. Hadoop搭建</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%87%86%E5%A4%87"><span class="nav-text">1.1 虚拟机准备</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#java%E5%AE%89%E8%A3%85"><span class="nav-text">1.2 Java安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hadoop%E5%AE%89%E8%A3%85"><span class="nav-text">1.3 Hadoop安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hadoop%E5%88%86%E5%B8%83%E5%BC%8F%E8%BF%90%E8%A1%8C%E6%A8%A1%E5%BC%8F"><span class="nav-text">1.4 Hadoop分布式运行模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E7%BE%A4%E8%A7%84%E5%88%92"><span class="nav-text">1.4.1 集群规划</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE"><span class="nav-text">1.4.2 集群配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE"><span class="nav-text">1.4.2.1 核心配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#hdfs%E9%85%8D%E7%BD%AE"><span class="nav-text">1.4.2.2 HDFS配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#yarn%E9%85%8D%E7%BD%AE"><span class="nav-text">1.4.2.3 YARN配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mapreduce%E9%85%8D%E7%BD%AE"><span class="nav-text">1.4.2.4 MapReduce配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8A%82%E7%82%B9%E9%85%8D%E7%BD%AE"><span class="nav-text">1.4.2.5 节点配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%86%E5%8F%91%E9%85%8D%E7%BD%AE"><span class="nav-text">1.4.2.6 分发配置</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E7%BE%A4%E5%90%AF%E5%8A%A8"><span class="nav-text">1.4.3 集群启动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E5%8E%86%E5%8F%B2%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-text">1.4.4 配置历史服务器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%97%A5%E5%BF%97%E8%81%9A%E9%9B%86%E5%8A%9F%E8%83%BD"><span class="nav-text">1.4.5 配置日志聚集功能</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#zookeeper%E5%AE%89%E8%A3%85"><span class="nav-text">2. Zookeeper安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD"><span class="nav-text">2.1 下载</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-text">2.2 安装</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#hbase%E5%AE%89%E8%A3%85"><span class="nav-text">3. Hbase安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD-1"><span class="nav-text">3.1 下载</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-1"><span class="nav-text">3.2 安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE"><span class="nav-text">3.2.1 配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8"><span class="nav-text">3.2.2 启动</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#mysql%E5%AE%89%E8%A3%85"><span class="nav-text">4. MySQL安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-2"><span class="nav-text">4.1 安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-1"><span class="nav-text">4.2 配置</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#hive%E5%AE%89%E8%A3%85"><span class="nav-text">5. Hive安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%8E%8B"><span class="nav-text">5.1 解压</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E5%85%83%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E5%88%B0mysql%E4%B8%AD"><span class="nav-text">5.2 配置元数据存储到Mysql中</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hive%E6%9C%8D%E5%8A%A1%E9%83%A8%E7%BD%B2"><span class="nav-text">5.3 Hive服务部署</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#hiveserver2%E9%83%A8%E7%BD%B2"><span class="nav-text">5.3.1 hiveserver2部署</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#metastore%E6%9C%8D%E5%8A%A1"><span class="nav-text">5.3.2 metastore服务</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#spark%E5%AE%89%E8%A3%85"><span class="nav-text">6. Spark安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD-2"><span class="nav-text">6.1 下载</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#yarn%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AE"><span class="nav-text">6.2 Yarn模式配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E5%8E%86%E5%8F%B2%E6%9C%8D%E5%8A%A1%E5%99%A8-1"><span class="nav-text">6.3 配置历史服务器</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#kafka%E5%AE%89%E8%A3%85"><span class="nav-text">7. Kafka安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD-3"><span class="nav-text">7.1下载</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-2"><span class="nav-text">7.2配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8-1"><span class="nav-text">7.3 启动</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#storm%E5%AE%89%E8%A3%85"><span class="nav-text">8. Storm安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-3"><span class="nav-text">8.1 配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8-2"><span class="nav-text">8.2 启动</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#cassandra%E5%AE%89%E8%A3%85"><span class="nav-text">9. Cassandra安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-4"><span class="nav-text">9.1 配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8-3"><span class="nav-text">9.2 启动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF"><span class="nav-text">9.3 添加开机自启</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%90%84%E6%A1%86%E6%9E%B6%E7%AE%80%E5%8D%95%E6%93%8D%E4%BD%9C"><span class="nav-text">10. 各框架简单操作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#hadoop"><span class="nav-text">10.1 hadoop</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#zookeeper%E4%BD%BF%E7%94%A8"><span class="nav-text">10.2 Zookeeper使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hbase%E4%BD%BF%E7%94%A8"><span class="nav-text">10.3 HBase使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hive%E4%BD%BF%E7%94%A8"><span class="nav-text">10.4 Hive使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#spark%E4%BD%BF%E7%94%A8"><span class="nav-text">10.5 Spark使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#storm%E4%BD%BF%E7%94%A8"><span class="nav-text">10.6 Storm使用</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-text">11. 总结</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%99%84%E5%BD%95"><span class="nav-text">附录</span></a></li></ol>
    </div>
</div>

            </div>
        </div>
    
</main>



<!-- common -->

<script src="/js/utils.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/toggle-theme.js"></script>

<script src="/js/code-block.js"></script>

<script src="/js/main.js"></script>

<script src="/js/libs/anime.min.js"></script>


<!-- local-search -->

    
<script src="/js/local-search.js"></script>



<!-- lazyload -->


<div class="">
    
        <!-- post-helper -->
        
<script src="/js/post/post-helper.js"></script>


        <!-- toc -->
        
            
<script src="/js/post/toc.js"></script>

        

        <!-- copyright-info -->
        
            
<script src="/js/post/copyright-info.js"></script>

        

        <!-- share -->
        
    

    <!-- categories page -->
    

    <!-- links page -->
    

    <!-- photos page -->
    

    <!-- tools page -->
    
</div>

<!-- mermaid -->

    
<script src="//cdn.jsdelivr.net/npm/mermaid@10.5.0/dist/mermaid.min.js"></script>






<!-- pjax -->



    
        
            
<script class="custom-inject-js" src="/js/custom.js" data-pjax></script>

        
    

</body>
</html>
